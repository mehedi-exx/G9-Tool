<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ব্যবহারকারী প্রোফাইল - G9Tool</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    .profile-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .profile-header {
      background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
      padding: 30px;
      border-radius: 20px;
      margin-bottom: 25px;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      position: relative;
      overflow: hidden;
    }
    
    .profile-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #00bfff, #0080ff, #00bfff);
      background-size: 200% 100%;
      animation: shimmer 2s infinite;
    }
    
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    .profile-avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: linear-gradient(135deg, #00bfff 0%, #0080ff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      font-size: 48px;
      color: white;
      box-shadow: 0 8px 25px rgba(0,191,255,0.3);
      position: relative;
    }
    
    .profile-avatar::after {
      content: '';
      position: absolute;
      inset: -3px;
      border-radius: 50%;
      background: linear-gradient(45deg, #00bfff, #0080ff, #00bfff);
      z-index: -1;
      animation: rotate 3s linear infinite;
    }
    
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .profile-name {
      font-size: 28px;
      font-weight: 700;
      color: #00bfff;
      margin-bottom: 10px;
    }
    
    .profile-status {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(40,167,69,0.3);
    }
    
    .profile-sections {
      display: grid;
      gap: 25px;
    }
    
    .profile-section {
      background: linear-gradient(135deg, #1c1c1c 0%, #2a2a2a 100%);
      border-radius: 16px;
      padding: 25px;
      border: 1px solid rgba(255,255,255,0.1);
      transition: all 0.3s ease;
    }
    
    .profile-section:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.4);
    }
    
    .section-title {
      font-size: 20px;
      font-weight: 600;
      color: #00bfff;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
    
    .info-item {
      background: rgba(255,255,255,0.05);
      padding: 15px;
      border-radius: 10px;
      border-left: 4px solid #00bfff;
    }
    
    .info-label {
      font-size: 14px;
      color: #888;
      margin-bottom: 5px;
      font-weight: 500;
    }
    
    .info-value {
      font-size: 16px;
      color: #fff;
      font-weight: 600;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
    }
    
    .stat-card {
      background: rgba(255,255,255,0.05);
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      border: 1px solid rgba(255,255,255,0.1);
      transition: all 0.3s ease;
    }
    
    .stat-card:hover {
      background: rgba(255,255,255,0.08);
      transform: translateY(-2px);
    }
    
    .stat-number {
      font-size: 28px;
      font-weight: 700;
      color: #00bfff;
      margin-bottom: 5px;
    }
    
    .stat-label {
      font-size: 14px;
      color: #ccc;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .activity-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      margin-bottom: 10px;
      transition: all 0.3s ease;
    }
    
    .activity-item:hover {
      background: rgba(255,255,255,0.08);
      transform: translateX(5px);
    }
    
    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #00bfff 0%, #0080ff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 16px;
    }
    
    .activity-content {
      flex: 1;
    }
    
    .activity-title {
      font-size: 16px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 2px;
    }
    
    .activity-time {
      font-size: 12px;
      color: #888;
    }
    
    .change-password-form {
      display: grid;
      gap: 15px;
    }
    
    .form-group {
      display: grid;
      gap: 5px;
    }
    
    .form-label {
      font-size: 14px;
      color: #ccc;
      font-weight: 500;
    }
    
    .form-input {
      background: linear-gradient(135deg, #2a2a2a 0%, #333 100%);
      border: 2px solid #444;
      border-radius: 10px;
      padding: 12px 15px;
      color: white;
      font-size: 16px;
      transition: all 0.3s ease;
    }
    
    .form-input:focus {
      border-color: #00bfff;
      box-shadow: 0 0 20px rgba(0,191,255,0.3);
      outline: none;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #00bfff 0%, #0080ff 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,191,255,0.4);
    }
    
    .btn-danger {
      background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(220,53,69,0.4);
    }
    
    .premium-badge {
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
      color: #333;
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 2px 8px rgba(255,215,0,0.3);
    }
    
    @media (max-width: 768px) {
      .info-grid,
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .profile-container {
        padding: 15px;
      }
      
      .profile-header {
        padding: 20px;
      }
      
      .profile-avatar {
        width: 100px;
        height: 100px;
        font-size: 40px;
      }
    }
  </style>
</head>
<body>

<header class="header">
  <div class="left-icons">
    <button class="menu-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
  </div>
  <div class="logo"><i class="fas fa-toolbox"></i> G9Tool Enhanced</div>
  <a class="telegram-icon" href="https://t.me/mehedi_exx" target="_blank"><i class="fab fa-telegram-plane"></i></a>
</header>

<div class="sidebar" id="sidebar">
  <button class="close-sidebar" onclick="toggleSidebar()"><i class="fas fa-times"></i></button>
  <a href="dashboard.html"><i class="fas fa-home"></i> ড্যাশবোর্ড</a>
  <a href="drafts.html"><i class="fas fa-save"></i> সংরক্ষিত ড্রাফট</a>
  <a href="profile.html" style="background: linear-gradient(135deg, #00bfff 0%, #0080ff 100%);"><i class="fas fa-user"></i> প্রোফাইল</a>
  <a href="tutorial.html"><i class="fas fa-graduation-cap"></i> টিউটোরিয়াল</a>
  <a href="admin.html"><i class="fas fa-cog"></i> এডমিন প্যানেল</a>
  <a href="fieldManager.html"><i class="fas fa-sliders-h"></i> ফিল্ড কাস্টমাইজ</a>
  <a href="file manager/Theme.html"><i class="fab fa-blogger-b"></i> ডাউনলোড থিম</a>
  <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> লগ আউট</a>
</div>

<main class="profile-container">
  <div class="profile-header">
    <div class="profile-avatar">
      <i class="fas fa-user"></i>
    </div>
    <h1 class="profile-name" id="profileName">ব্যবহারকারী</h1>
    <div class="profile-status">
      <i class="fas fa-crown"></i>
      <span>প্রিমিয়াম সদস্য</span>
    </div>
  </div>

  <div class="profile-sections">
    <!-- Account Information -->
    <div class="profile-section">
      <h2 class="section-title">
        <i class="fas fa-info-circle"></i>
        অ্যাকাউন্ট তথ্য
      </h2>
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">ইউজারনেম</div>
          <div class="info-value" id="username">লোড হচ্ছে...</div>
        </div>
        <div class="info-item">
          <div class="info-label">সদস্যতার ধরন</div>
          <div class="info-value">
            <span class="premium-badge">প্রিমিয়াম</span>
          </div>
        </div>
        <div class="info-item">
          <div class="info-label">যোগদানের তারিখ</div>
          <div class="info-value" id="joinDate">লোড হচ্ছে...</div>
        </div>
        <div class="info-item">
          <div class="info-label">শেষ লগইন</div>
          <div class="info-value" id="lastLogin">এখনই</div>
        </div>
      </div>
    </div>

    <!-- Statistics -->
    <div class="profile-section">
      <h2 class="section-title">
        <i class="fas fa-chart-bar"></i>
        পরিসংখ্যান
      </h2>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number" id="totalProducts">0</div>
          <div class="stat-label">মোট প্রোডাক্ট</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="totalDrafts">0</div>
          <div class="stat-label">সংরক্ষিত ড্রাফট</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="thisMonth">0</div>
          <div class="stat-label">এই মাসে</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="avgPerDay">0</div>
          <div class="stat-label">দৈনিক গড়</div>
        </div>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="profile-section">
      <h2 class="section-title">
        <i class="fas fa-history"></i>
        সাম্প্রতিক কার্যকলাপ
      </h2>
      <div id="recentActivity">
        <!-- Activity items will be loaded here -->
      </div>
    </div>

    <!-- Change Password -->
    <div class="profile-section">
      <h2 class="section-title">
        <i class="fas fa-lock"></i>
        পাসওয়ার্ড পরিবর্তন
      </h2>
      <form class="change-password-form" onsubmit="changePassword(event)">
        <div class="form-group">
          <label class="form-label" for="currentPassword">বর্তমান পাসওয়ার্ড</label>
          <input type="password" id="currentPassword" class="form-input" placeholder="বর্তমান পাসওয়ার্ড লিখুন" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="newPassword">নতুন পাসওয়ার্ড</label>
          <input type="password" id="newPassword" class="form-input" placeholder="নতুন পাসওয়ার্ড লিখুন" required minlength="6">
        </div>
        <div class="form-group">
          <label class="form-label" for="confirmPassword">পাসওয়ার্ড নিশ্চিত করুন</label>
          <input type="password" id="confirmPassword" class="form-input" placeholder="নতুন পাসওয়ার্ড পুনরায় লিখুন" required>
        </div>
        <button type="submit" class="btn-primary">
          <i class="fas fa-save"></i>
          পাসওয়ার্ড পরিবর্তন করুন
        </button>
      </form>
    </div>

    <!-- Danger Zone -->
    <div class="profile-section">
      <h2 class="section-title">
        <i class="fas fa-exclamation-triangle"></i>
        বিপজ্জনক এলাকা
      </h2>
      <p style="color: #888; margin-bottom: 20px;">
        এই ক্রিয়াগুলি স্থায়ী এবং পূর্বাবস্থায় ফেরানো যাবে না।
      </p>
      <div style="display: flex; gap: 15px; flex-wrap: wrap;">
        <button class="btn-danger" onclick="clearAllDrafts()">
          <i class="fas fa-trash"></i>
          সব ড্রাফট মুছুন
        </button>
        <button class="btn-danger" onclick="resetSettings()">
          <i class="fas fa-undo"></i>
          সেটিংস রিসেট করুন
        </button>
      </div>
    </div>
  </div>
</main>

<script src="script.js"></script>
<script>
  function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("active");
  }

  function logout() {
    if (confirm("আপনি কি লগ আউট করতে চান?")) {
      localStorage.removeItem("loggedInUser");
      window.location.replace("index.html");
    }
  }

  function loadUserProfile() {
    const username = localStorage.getItem("loggedInUser");
    if (!username) {
      window.location.replace("index.html");
      return;
    }

    // Load user data
    fetch(`users/${username}.json`)
      .then(res => res.json())
      .then(data => {
        document.getElementById("profileName").textContent = data.name || username;
        document.getElementById("username").textContent = username;
        
        // Simulate join date (you can store this in user data)
        const joinDate = new Date(2024, 0, 1).toLocaleDateString('bn-BD');
        document.getElementById("joinDate").textContent = joinDate;
      })
      .catch(error => {
        console.error("Error loading user data:", error);
        document.getElementById("profileName").textContent = username;
        document.getElementById("username").textContent = username;
      });

    updateStatistics();
    loadRecentActivity();
  }

  function updateStatistics() {
    const drafts = JSON.parse(localStorage.getItem("drafts") || "[]");
    const now = new Date();
    const thisMonth = drafts.filter(draft => {
      const draftDate = new Date(draft.timestamp);
      return draftDate.getMonth() === now.getMonth() && 
             draftDate.getFullYear() === now.getFullYear();
    });

    document.getElementById("totalProducts").textContent = drafts.length;
    document.getElementById("totalDrafts").textContent = drafts.length;
    document.getElementById("thisMonth").textContent = thisMonth.length;
    
    // Calculate average per day (last 30 days)
    const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
    const recentDrafts = drafts.filter(draft => new Date(draft.timestamp) >= thirtyDaysAgo);
    const avgPerDay = Math.round(recentDrafts.length / 30 * 10) / 10;
    document.getElementById("avgPerDay").textContent = avgPerDay;
  }

  function loadRecentActivity() {
    const drafts = JSON.parse(localStorage.getItem("drafts") || "[]");
    const recentDrafts = drafts
      .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
      .slice(0, 5);

    const activityContainer = document.getElementById("recentActivity");
    
    if (recentDrafts.length === 0) {
      activityContainer.innerHTML = `
        <div style="text-align: center; color: #888; padding: 20px;">
          <i class="fas fa-inbox" style="font-size: 48px; margin-bottom: 10px; opacity: 0.5;"></i>
          <p>কোনো সাম্প্রতিক কার্যকলাপ নেই</p>
        </div>
      `;
      return;
    }

    const activityHTML = recentDrafts.map(draft => {
      const date = new Date(draft.timestamp);
      const timeAgo = getTimeAgo(date);
      
      return `
        <div class="activity-item">
          <div class="activity-icon">
            <i class="fas fa-plus"></i>
          </div>
          <div class="activity-content">
            <div class="activity-title">${draft.name || 'নামহীন প্রোডাক্ট'} তৈরি করেছেন</div>
            <div class="activity-time">${timeAgo}</div>
          </div>
        </div>
      `;
    }).join('');

    activityContainer.innerHTML = activityHTML;
  }

  function getTimeAgo(date) {
    const now = new Date();
    const diffInSeconds = Math.floor((now - date) / 1000);
    
    if (diffInSeconds < 60) return 'এইমাত্র';
    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} মিনিট আগে`;
    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} ঘন্টা আগে`;
    if (diffInSeconds < 2592000) return `${Math.floor(diffInSeconds / 86400)} দিন আগে`;
    return date.toLocaleDateString('bn-BD');
  }

  function changePassword(event) {
    event.preventDefault();
    
    const currentPassword = document.getElementById("currentPassword").value;
    const newPassword = document.getElementById("newPassword").value;
    const confirmPassword = document.getElementById("confirmPassword").value;
    
    if (newPassword !== confirmPassword) {
      showToast("নতুন পাসওয়ার্ড মিলছে না", 'error');
      return;
    }
    
    if (newPassword.length < 6) {
      showToast("পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে", 'error');
      return;
    }
    
    // Here you would typically verify the current password and update it
    // For demo purposes, we'll just show a success message
    showToast("পাসওয়ার্ড সফলভাবে পরিবর্তন করা হয়েছে", 'success');
    
    // Clear the form
    document.getElementById("currentPassword").value = '';
    document.getElementById("newPassword").value = '';
    document.getElementById("confirmPassword").value = '';
  }

  function clearAllDrafts() {
    if (!confirm("আপনি কি নিশ্চিত যে সব ড্রাফট মুছে ফেলতে চান? এই কাজটি পূর্বাবস্থায় ফেরানো যাবে না।")) {
      return;
    }
    
    if (!confirm("সত্যিই সব ড্রাফট মুছে ফেলবেন? এটি স্থায়ীভাবে মুছে যাবে।")) {
      return;
    }
    
    localStorage.removeItem("drafts");
    showToast("সব ড্রাফট মুছে ফেলা হয়েছে", 'info');
    updateStatistics();
    loadRecentActivity();
  }

  function resetSettings() {
    if (!confirm("আপনি কি সব সেটিংস রিসেট করতে চান?")) {
      return;
    }
    
    localStorage.removeItem("fieldVisibility");
    localStorage.removeItem("hiddenFields");
    localStorage.removeItem("editDraftId");
    
    showToast("সেটিংস রিসেট করা হয়েছে", 'info');
  }

  // Enhanced toast function (if not already defined)
  function showToast(message, type = 'success') {
    const toast = document.createElement("div");
    toast.textContent = message;
    toast.className = 'toast';
    
    const colors = {
      success: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',
      error: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',
      info: 'linear-gradient(135deg, #007bff 0%, #0056b3 100%)',
      warning: 'linear-gradient(135deg, #ffc107 0%, #e0a800 100%)'
    };
    
    toast.style.cssText = `
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: ${colors[type] || colors.success};
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      z-index: 9999;
      font-weight: 600;
      animation: toastSlideIn 0.3s ease-out;
    `;
    
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
  }

  // Page load
  window.addEventListener("DOMContentLoaded", () => {
    if (!localStorage.getItem("loggedInUser")) {
      window.location.replace("index.html");
      return;
    }
    
    loadUserProfile();
    console.log("Profile page loaded successfully!");
  });
</script>

</body>
</html>

