<!-- ‚úÖ dashboard.html (‡¶´‡ßÅ‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‚Äî ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü + ‡¶ï‡ßã‡¶° ‡¶°‡ßÅ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶ü ‡¶ö‡ßá‡¶ï + ‡¶Ö‡¶ü‡ßã-‡¶≤‡ßã‡¶°) -->
<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>G9Tool Dashboard</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
<script>
if (!localStorage.getItem("loggedInUser")) {
  alert("‚ö†Ô∏è ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!");
  window.location.href = "index.html";
}
</script>

<header class="header">
  <div class="left-icons">
    <button class="menu-btn" onclick="toggleMenu()">
      <i class="fas fa-bars"></i>
    </button>
    <div class="logo">
      <i class="fas fa-box-open"></i> G9Tool
    </div>
  </div>
  <a href="https://t.me/G9tool" class="telegram-icon" target="_blank">
    <i class="fab fa-telegram-plane"></i>
  </a>
</header>

<main>
  <div class="form-wrapper">
    <input type="text" id="name" placeholder="‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶®‡¶æ‡¶Æ" required>
    <input type="text" id="code" placeholder="‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶ï‡ßã‡¶°" required>
    <input type="number" id="price" placeholder="‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶∏ (‡ß≥)" required>
    <input type="number" id="offer" placeholder="‡¶Ö‡¶´‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶∏ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)">
    <input type="text" id="unit" placeholder="‡¶á‡¶â‡¶®‡¶ø‡¶ü (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶™‡¶ø‡¶∏, ‡¶ï‡ßá‡¶ú‡¶ø)">
    <input type="number" id="qty" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (Qty)">
    <input type="text" id="brand" placeholder="‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶° / ‡¶ï‡ßã‡¶Æ‡ßç‡¶™‡¶æ‡¶®‡¶ø">
    <input type="text" id="size" placeholder="‡¶∏‡¶æ‡¶á‡¶ú ‡¶Ö‡¶™‡¶∂‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: S, M, L)">
    <input type="text" id="color" placeholder="‡¶∞‡¶ô ‡¶Ö‡¶™‡¶∂‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶≤‡¶æ‡¶≤, ‡¶∏‡¶¨‡ßÅ‡¶ú)">
    <input type="text" id="delivery" placeholder="‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ü‡¶æ‡¶á‡¶Æ">
    <input type="text" id="status" placeholder="‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏">
    <input type="text" id="category" placeholder="‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø">
    <textarea id="desc" placeholder="‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ"></textarea>

    <div id="imageInputs">
      <div class="image-group">
        <input type="url" class="img-url" placeholder="‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (Image URL)">
      </div>
    </div>
    <button onclick="addImageInput()"><i class="fas fa-plus"></i> ‡¶Ü‡¶∞‡¶ì ‡¶õ‡¶¨‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>

    <input type="url" id="video" placeholder="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï (YouTube)">
    <input type="text" id="wa" placeholder="WhatsApp ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (8801XXXXXXXXXX)" required>

    <h4 style="margin-top: 20px;">üîß ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶§‡¶•‡ßç‡¶Ø (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ì‡ßü‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü‡¶ø, ‡¶â‡ßé‡¶™‡¶æ‡¶¶‡¶® ‡¶¶‡ßá‡¶∂)</h4>
    <div id="customFields">
      <div class="custom-field-group">
        <input type="text" class="custom-key" placeholder="‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ ‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ì‡ßü‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü‡¶ø">
        <input type="text" class="custom-value" placeholder="‡¶Æ‡¶æ‡¶® ‡¶Ø‡ßá‡¶Æ‡¶®: ‡ß© ‡¶Æ‡¶æ‡¶∏">
      </div>
    </div>
    <button onclick="addCustomField()"><i class="fas fa-plus"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>

    <div style="text-align:center;">
      <button id="generateBtn"><i class="fas fa-magic"></i> ‡¶ï‡ßã‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü</button>
      <button id="copyBtn"><i class="fas fa-copy"></i> ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
      <button id="resetBtn" onclick="formReset()"><i class="fas fa-eraser"></i> ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>

    <div class="output" id="output"></div>
    <div class="live-preview" id="preview"></div>
  </div>
</main>

<div id="sidebar" class="sidebar">
  <button class="close-sidebar" onclick="toggleMenu()"><i class="fas fa-times"></i></button>
  <a href="dashboard.html"><i class="fas fa-home"></i> ‡¶π‡ßã‡¶Æ</a>
  <a href="menu/about.html"><i class="fas fa-info-circle"></i> ‡¶è‡¶¨‡¶æ‡¶â‡¶ü</a>
  <a href="menu/contact.html"><i class="fas fa-phone"></i> ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü</a>
  <a href="menu/privacy.html"><i class="fas fa-user-shield"></i> ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø</a>
  <a href="menu/tutorial.html"><i class="fas fa-graduation-cap"></i> ‡¶ü‡¶ø‡¶â‡¶ü‡ßã‡¶∞‡¶ø‡ßü‡¶æ‡¶≤</a>
  <a href="admin.html"><i class="fas fa-database"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®</a>
  <a href="index.html" onclick="logout()"><i class="fas fa-sign-out-alt"></i> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</a>
</div>

<script>
function toggleMenu() {
  document.getElementById("sidebar").classList.toggle("active");
}

// ‚úÖ Form Auto-load
window.addEventListener('load', () => {
  const saved = localStorage.getItem("formDraft");
  if (saved) {
    const data = JSON.parse(saved);
    for (const id in data) {
      const el = document.getElementById(id);
      if (el) el.value = data[id];
    }

    if (data.imgs && Array.isArray(data.imgs)) {
      const container = document.getElementById("imageInputs");
      container.innerHTML = "";
      data.imgs.forEach(url => {
        const input = document.createElement("input");
        input.type = "url";
        input.className = "img-url";
        input.placeholder = "‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (Image URL)";
        input.value = url;
        container.appendChild(input);
      });
    }

    if (data.custom && Array.isArray(data.custom)) {
      const container = document.getElementById("customFields");
      container.innerHTML = "";
      data.custom.forEach(pair => {
        const div = document.createElement("div");
        div.className = "custom-field-group";
        div.innerHTML = `<input type="text" class="custom-key" value="${pair.key}" placeholder="‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ"> <input type="text" class="custom-value" value="${pair.value}" placeholder="‡¶Æ‡¶æ‡¶®">`;
        container.appendChild(div);
      });
    }
  }
});

// ‚úÖ Save Draft on Change
document.querySelectorAll("input, textarea").forEach(input => {
  input.addEventListener("input", () => {
    const draft = {};
    document.querySelectorAll("input, textarea").forEach(el => {
      if (el.id) draft[el.id] = el.value;
    });
    localStorage.setItem("formDraft", JSON.stringify(draft));
  });
});

// ‚úÖ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function formReset() {
  if (!confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) return;

  document.querySelectorAll("input, textarea").forEach(el => el.value = "");

  document.getElementById("imageInputs").innerHTML = `
    <div class="image-group">
      <input type="url" class="img-url" placeholder="‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (Image URL)">
    </div>
  `;

  document.getElementById("customFields").innerHTML = `
    <div class="custom-field-group">
      <input type="text" class="custom-key" placeholder="‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ ‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ì‡ßü‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü‡¶ø">
      <input type="text" class="custom-value" placeholder="‡¶Æ‡¶æ‡¶® ‡¶Ø‡ßá‡¶Æ‡¶®: ‡ß© ‡¶Æ‡¶æ‡¶∏">
    </div>
  `;

  localStorage.removeItem("formDraft");
  document.getElementById("output").textContent = "";
  document.getElementById("preview").innerHTML = "";
}

// ‚úÖ ‡¶ï‡ßã‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‚Äî Same Code Check + Save
document.getElementById("generateBtn").addEventListener("click", () => {
  const name = document.getElementById("name").value.trim();
  const code = document.getElementById("code").value.trim();
  const price = parseFloat(document.getElementById("price").value);
  const wa = document.getElementById("wa").value.trim();
  const imgs = document.querySelectorAll(".img-url");

  if (!name || !code || isNaN(price) || !imgs[0].value || !wa) {
    alert("‚ùå ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶®‡¶æ‡¶Æ, ‡¶ï‡ßã‡¶°, ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶∏, ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶õ‡¶¨‡¶ø ‡¶ì WhatsApp ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§");
    return;
  }

  const user = localStorage.getItem("loggedInUser") || "guest";
  const key = `g9_products_${user}`;
  const products = JSON.parse(localStorage.getItem(key) || "[]");
  const editIndex = localStorage.getItem("edit_product_index");

  const duplicate = products.some((p, i) => i != editIndex && p.code === code);
  if (duplicate) {
    alert("‚ö†Ô∏è ‡¶è‡¶á ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡ßü‡ßá ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶®‡•§");
    return;
  }

  const product = {};
  document.querySelectorAll("input, textarea").forEach(el => {
    if (el.id) product[el.id] = el.value;
  });
  product.imgs = [...imgs].map(i => i.value.trim()).filter(Boolean);
  product.custom = [...document.querySelectorAll(".custom-field-group")].map(g => {
    const key = g.querySelector(".custom-key")?.value.trim();
    const val = g.querySelector(".custom-value")?.value.trim();
    return key && val ? { key, value: val } : null;
  }).filter(Boolean);

  if (editIndex !== null) {
    products[parseInt(editIndex)] = product;
    localStorage.removeItem("edit_product_index");
  } else {
    products.push(product);
  }

  localStorage.setItem(key, JSON.stringify(products));
  alert("‚úÖ ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶∏‡ßá‡¶≠ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
});

// ‚úÖ ‡¶ï‡¶™‡¶ø ‡¶¨‡¶æ‡¶ü‡¶®
document.getElementById("copyBtn").addEventListener("click", () => {
  const output = document.getElementById("output").textContent;
  navigator.clipboard.writeText(output)
    .then(() => alert("‚úÖ ‡¶ï‡ßã‡¶° ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!"))
    .catch(() => alert("‚ùå ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø"));
});
</script>
</body>
</html>
