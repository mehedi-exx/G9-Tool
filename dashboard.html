<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>G9Tool Dashboard</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>

<script>
  if (!localStorage.getItem("loggedInUser")) {
    alert("‚ö†Ô∏è ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!");
    window.location.href = "index.html";
  }
</script>

<header class="header">
  <div class="left-icons">
    <button class="menu-btn" onclick="toggleMenu()"><i class="fas fa-bars"></i></button>
    <div class="logo"><i class="fas fa-box-open"></i> G9Tool</div>
  </div>
  <a href="https://t.me/G9tool" class="telegram-icon" target="_blank">
    <i class="fab fa-telegram-plane"></i>
  </a>
</header>

<main>
  <div class="form-wrapper">
    <input type="text" id="name" placeholder="‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶®‡¶æ‡¶Æ" required>
    <input type="text" id="code" placeholder="‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶ï‡ßã‡¶°" required>
    <input type="number" id="price" placeholder="‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶∏ (‡ß≥)" required>
    <input type="number" id="offer" placeholder="‡¶Ö‡¶´‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶∏ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)">
    <input type="text" id="unit" placeholder="‡¶á‡¶â‡¶®‡¶ø‡¶ü (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶™‡¶ø‡¶∏, ‡¶ï‡ßá‡¶ú‡¶ø)">
    <input type="number" id="qty" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (Qty)">
    <input type="text" id="brand" placeholder="‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶° / ‡¶ï‡ßã‡¶Æ‡ßç‡¶™‡¶æ‡¶®‡¶ø">
    <input type="text" id="size" placeholder="‡¶∏‡¶æ‡¶á‡¶ú ‡¶Ö‡¶™‡¶∂‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: S, M, L)">
    <input type="text" id="color" placeholder="‡¶∞‡¶ô ‡¶Ö‡¶™‡¶∂‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶≤‡¶æ‡¶≤, ‡¶∏‡¶¨‡ßÅ‡¶ú)">
    <input type="text" id="delivery" placeholder="‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ü‡¶æ‡¶á‡¶Æ">
    <input type="text" id="status" placeholder="‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏">
    <input type="text" id="category" placeholder="‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø">
    <textarea id="desc" placeholder="‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ"></textarea>

    <div id="imageInputs">
      <input type="url" class="img-url" placeholder="‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (Image URL)">
    </div>
    <button onclick="addImageInput()"><i class="fas fa-plus"></i> ‡¶Ü‡¶∞‡¶ì ‡¶õ‡¶¨‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>

    <input type="url" id="video" placeholder="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï (YouTube)">
    <input type="text" id="wa" placeholder="WhatsApp ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (8801XXXXXXXXXX)" required>

    <h4 style="margin-top: 20px;">üîß ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶§‡¶•‡ßç‡¶Ø</h4>
    <div id="customFields">
      <div class="custom-field-group">
        <input type="text" class="custom-key" placeholder="‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ">
        <input type="text" class="custom-value" placeholder="‡¶Æ‡¶æ‡¶®">
      </div>
    </div>
    <button onclick="addCustomField()"><i class="fas fa-plus"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>

    <div style="text-align:center;">
      <button id="generateBtn"><i class="fas fa-magic"></i> ‡¶ï‡ßã‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü</button>
      <button id="copyBtn"><i class="fas fa-copy"></i> ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>

    <div class="output" id="output"></div>
    <div class="live-preview" id="preview"></div>
  </div>
</main>

<!-- Sidebar -->
<div id="sidebar" class="sidebar">
  <button class="close-sidebar" onclick="toggleMenu()"><i class="fas fa-times"></i></button>
  <a href="dashboard.html" class="active"><i class="fas fa-home"></i> ‡¶π‡ßã‡¶Æ</a>
  <a href="menu/about.html"><i class="fas fa-info-circle"></i> ‡¶è‡¶¨‡¶æ‡¶â‡¶ü</a>
  <a href="menu/contact.html"><i class="fas fa-phone"></i> ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü</a>
  <a href="menu/privacy.html"><i class="fas fa-user-shield"></i> ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø</a>
  <a href="admin.html"><i class="fas fa-tools"></i> ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</a>
  <a href="index.html" onclick="logout()"><i class="fas fa-sign-out-alt"></i> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</a>
</div>

<script src="script.js"></script>
<script>
  // ‚úÖ ‡¶è‡¶°‡¶ø‡¶ü ‡¶Æ‡ßã‡¶° ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
  const editIndex = new URLSearchParams(window.location.search).get("edit");
  if (editIndex !== null) {
    const allData = JSON.parse(localStorage.getItem("g9tool_data") || "{}");
    const user = localStorage.getItem("loggedInUser");
    const saved = allData[user] || [];
    const product = saved[parseInt(editIndex)];

    if (product) {
      document.getElementById("name").value = product.name || "";
      document.getElementById("code").value = product.code || "";
      document.getElementById("price").value = product.price || "";
      document.getElementById("offer").value = product.offer || "";
      document.getElementById("unit").value = product.unit || "";
      document.getElementById("qty").value = product.qty || "";
      document.getElementById("brand").value = product.brand || "";
      document.getElementById("size").value = product.size || "";
      document.getElementById("color").value = product.color || "";
      document.getElementById("delivery").value = product.delivery || "";
      document.getElementById("status").value = product.status || "";
      document.getElementById("category").value = product.category || "";
      document.getElementById("desc").value = product.desc || "";
      document.getElementById("video").value = product.video || "";
      document.getElementById("wa").value = product.wa || "";

      const imgCtn = document.getElementById("imageInputs");
      imgCtn.innerHTML = "";
      (product.images || []).forEach(url => {
        const input = document.createElement("input");
        input.type = "url";
        input.className = "img-url";
        input.value = url;
        input.placeholder = "‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï";
        imgCtn.appendChild(input);
      });

      const customCtn = document.getElementById("customFields");
      customCtn.innerHTML = "";
      (product.custom || []).forEach(pair => {
        const div = document.createElement("div");
        div.className = "custom-field-group";
        div.innerHTML = `<input type="text" class="custom-key" value="${pair.key}" placeholder="‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ"><input type="text" class="custom-value" value="${pair.value}" placeholder="‡¶Æ‡¶æ‡¶®">`;
        customCtn.appendChild(div);
      });

      // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá Edit Index Save
      localStorage.setItem("editIndex", editIndex);
    }
  }
</script>

</body>
</html>
