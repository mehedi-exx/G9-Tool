// Theme toggle
function toggleTheme() {
  const body = document.body;
  const themeToggle = document.getElementById("themeToggle");
  body.classList.toggle("light");
  const isLight = body.classList.contains("light");
  themeToggle.textContent = isLight ? "‚òÄÔ∏è" : "üåô";
  localStorage.setItem("theme", isLight ? "light" : "dark");
}

// Load saved theme
window.onload = () => {
  const saved = localStorage.getItem("theme");
  if (saved === "light") {
    document.body.classList.add("light");
    document.getElementById("themeToggle").textContent = "‚òÄÔ∏è";
  }
};

// Menu toggle
function toggleMenu() {
  document.getElementById("menuInfo").classList.toggle("show");
}

// Live image preview (optional ‚Äì expand if needed)
function previewImage() {
  // future use
}

// Generate HTML Code
document.getElementById("g9Form").addEventListener("submit", function (e) {
  e.preventDefault();
  const title = document.getElementById("title").value.trim();
  const sku = document.getElementById("sku").value.trim();
  const price = document.getElementById("price").value.trim();
  const offer = document.getElementById("offer").value.trim();
  const delivery = document.getElementById("delivery").value.trim();
  const image = document.getElementById("image").value.trim();
  const desc = document.getElementById("desc").value.trim();

  if (!title || !sku || !price || !image || !desc) {
    alert("‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡ßÄ‡ßü ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®!");
    return;
  }

  const offerHTML = offer
    ? `<div style="font-size: 16px; color: #777; text-decoration: line-through;">‡ß≥${price}</div>
       <div style="font-size: 14px; background: #e0f2f1; color: #388e3c; padding: 4px 10px; display: inline-block; margin-top: 5px; border-radius: 4px;">
        üè∑Ô∏è ‡ß≥${offer} ‡¶Ö‡¶´‡¶æ‡¶∞
       </div>`
    : `<div style="font-size: 16px;">‡ß≥${price}</div>`;

  const deliveryHTML = delivery ? `<li>‚è≥ ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø: ${delivery}</li>` : "";

  const message = `‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶á:\n\nüì¶ ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ: ${title}\nüÜî ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶ï‡ßã‡¶°: ${sku}\nüí∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ‡ß≥${offer || price}\n\n‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ú‡¶æ‡¶®‡¶æ‡¶®‡•§`;

  const whatsappLink = `https://wa.me/8801627647776?text=${encodeURIComponent(message)}`;

  const html = `
<!-- ‚úÖ Product Image -->
<img src="${image}" alt="${title}" style="display:block; margin:20px auto; max-width:100%; border-radius:10px;" />

<!-- ‚úÖ Price -->
<div style="text-align:center; margin-bottom:20px;">
  <div style="font-size: 26px; font-weight: bold; color: #d32f2f;">‡ß≥${offer || price}</div>
  ${offerHTML}
</div>

<!-- ‚úÖ WhatsApp Order -->
<p style="text-align: center;">
  <a href="${whatsappLink}" target="_blank"
     style="display:inline-block;background:#25D366;color:#fff;padding:12px 25px;border-radius:6px;font-weight:bold;text-decoration:none;font-size:16px;">
    WhatsApp ‡¶è ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
  </a>
</p>

<!-- ‚úÖ Hidden getProduct Shortcode -->
<p style="display: none;">
  <a href="#">
    {getProduct} $button={Price} $price={‡ß≥${offer || price}} $sale={‡ß≥${price}} $icon={cart} $style={1}
  </a>
</p>

<!-- ‚úÖ Product Title -->
<h1 style="text-align:center; color:#c62828;">${title}</h1>

<!-- ‚úÖ Description -->
<p style="text-align: justify;">${desc}</p>

<!-- ‚úÖ Product Info -->
<ul style="list-style:none; padding-left:0;">
  <li>üîñ ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶ï‡ßã‡¶°: ${sku}</li>
  ${deliveryHTML}
</ul>
`;

  document.getElementById("output").textContent = html;
});

// Copy to clipboard
function copyOutput() {
  const code = document.getElementById("output").textContent;
  navigator.clipboard.writeText(code).then(() => alert("‚úÖ ‡¶ï‡¶™‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!"));
}

// Download as file
function downloadOutput() {
  const code = document.getElementById("output").textContent;
  const blob = new Blob([code], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const link = document.createElement("a");
  link.href = url;
  link.download = "product-post.html";
  link.click();
}
